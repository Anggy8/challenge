webdriver {
  base.url = "http://todomvc.com/examples/angularjs/#/"
  autodownload = true
  driver = chrome
}


//firefox {
//  preferences = "browser.download.dir=/tmp;browser.helperApps.alwaysAsk.force=false;browser.download.manager.showWhenStarting=false;browser.download.useDownloadDir=true;browser.download.folderList=2;"
//}

//serenity.take.screenshots = FOR_FAILURES

chrome {
  switches = "--start-maximized;--enable-automation;--no-sandbox;--disable-popup-blocking;--disable-default-apps;--disable-infobars;--disable-gpu;--disable-extensions;"
  preferences {
    download: "{prompt_for_download: false,directory_upgrade: true,default_directory:'${user.dir}/downloaded-files'}"
  }
}

headless.mode = true

serenity {
  project.name = "Demo Project using Serenity and Cucumber"
  test.root = "net.serenitybdd.demos.todos.features"
  tag.failures = "true"
  linked.tags = "issue"
  restart.browser.for.each = scenario

  reports.show.step.details=true
  verbose.steps=true
  full.page.screenshot.strategy=WHOLE_PAGE
  verbose.screenshots=true
  logging=VERBOSE
  verbose.reporting=true
  verbose.reporting=true
}

environment = prod

environments {
  local {
    home.page = "http://localhost:8080/angularjs/#/"
  }
  prod {
    home.page = "http://todomvc.com/examples/angularjs/#/"
  }
  browserstack {
    webdriver.driver = remote
    home.page = "http://todomvc.com/examples/angularjs/#/"
    webdriver.base.url = "http://todomvc.com/examples/angularjs/#/"
    webdriver.remote.driver = chrome
    webdriver.remote.url = "https://#{browserstack.user}:#{browserstack.key}@#{browserstack.server}"
    headless.mode = false
  }
  #
  # This environment illustrates a Saucelabs configuration
  #
  sauce {
    webdriver {
      # Driver must be remote for Saucelabs
      driver = remote
      base.url = "http://todomvc.com/examples/angularjs/#/"

      # W3C Capabilities
      screenResolution = "1280x1024"
      strictFileInteractability = true
      unhandledPromptBehavior = "ignore"
      timeouts {
        script = 20000
        pageLoad = 400000,
        implicit = 1000
      }
    }

    #
    # Saucelabs-specific capabilities
    #
    saucelabs {
      #
      # Mandatory fields
      #
      platformName = "Windows 10"
      browserName = "Chrome"
      browserVersion = "latest"
      #
      # The saucelabs.url property tells Serenity to use Saucelabs for these tests
      #
      url = "https://#{saucelabs.user_id}:#{saucelabs.access_key}@ondemand.us-west-1.saucelabs.com:443/wd/hub"

      #
      # Optional saucelabs-specific fields
      #
      tags = ["end-to-end"]
      //      recordScreenshots = false
      maxDuration = 900
    }
  }
}
